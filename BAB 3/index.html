<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Dashboard Monitoring Data — Beranda</title>
  <style>
    :root{--green:#2f855a;--dark:#123;--muted:#6b7280}
    body{font-family:Inter,Arial,sans-serif;margin:0;background:#f8faf9;color:var(--dark)}
    header{background:var(--green);color:#fff;padding:14px 20px;display:flex;justify-content:space-between;align-items:center}
    nav a{color:#fff;text-decoration:none;margin-left:12px}
    .container{max-width:900px;margin:25px auto;padding:20px}
    .grid{display:flex;flex-wrap:wrap;gap:16px}
    .card{background:#fff;padding:18px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.08);flex:1;min-width:260px}
    .btn{background:var(--green);color:#fff;padding:10px 14px;border:none;border-radius:8px;cursor:pointer}
    .small{font-size:.9rem;color:var(--muted)}
    footer{text-align:center;padding:10px;color:var(--muted)}
    #snackbar{visibility:hidden;min-width:240px;margin-left:-120px;background:#333;color:#fff;text-align:center;border-radius:8px;padding:12px;position:fixed;left:50%;bottom:30px;z-index:1000;opacity:0;transform:translateY(10px)}
    #snackbar.show{visibility:visible;opacity:1;transform:translateY(0);transition:opacity .35s,transform .35s}
    #snackbar.success{background:#16a34a}
    #snackbar.error{background:#dc2626}
  </style>
</head>
<body>
  <header>
  <div class="brand">Dashboard Monitoring Data</div>
  <nav>
    <a href="index.html">Beranda</a>
    <a href="tentang.html">Tentang</a>
    <a href="admin.html">Login Admin</a>
    <a href="login.html">Dashboard</a>
  </nav>
</header>

  <main class="container">
    <h2>Selamat Datang di Dashboard Wisata</h2>

    <div class="grid">
      <div class="card">
        <h3>Statistik Data</h3>
        <p class="small">Jumlah Kategori: <span id="countCategories">0</span></p>
        <p class="small">Jumlah Transaksi: <span id="countTransactions">0</span></p>
        <button class="btn" id="btnAddCategory">Tambah Kategori</button>
        <button class="btn" id="btnAddTransaction" style="margin-top:8px">Tambah Transaksi</button>
      </div>

      <div class="card">
        <h3>Aktivitas</h3>
        <p class="small">Aksi terakhir: <span id="lastAction">-</span></p>
        <button class="btn" id="btnShowQuote">Tampilkan Quote</button>
      </div>
    </div>
  </main>

  <div id="snackbar"></div>
  <footer>© 2025 Dashboard Monitoring Data</footer>

  <script>
  // === TOAST/SNACKBAR ===
  function showToast(msg, type='default', dur=3000){
    const s = document.getElementById('snackbar');
    s.textContent = msg;
    s.className = 'show';
    if(type==='success') s.classList.add('success');
    if(type==='error') s.classList.add('error');
    setTimeout(()=>{ s.className=''; s.classList.remove('success','error'); }, dur);
  }

  // === WEB STORAGE ===
  function getData(key){ return JSON.parse(localStorage.getItem(key)||'[]'); }
  function setData(key,val){ localStorage.setItem(key,JSON.stringify(val)); }

  function refreshStats(){
    document.getElementById('countCategories').textContent = getData('categories').length;
    document.getElementById('countTransactions').textContent = getData('transactions').length;
  }

  // === EVENT 1: DOMContentLoaded ===
  document.addEventListener('DOMContentLoaded', ()=>{
    refreshStats();
    const la = localStorage.getItem('lastAction')||'-';
    document.getElementById('lastAction').textContent = la;
  });

  // === EVENT 2: Tambah Kategori (dengan PopUp prompt) ===
  document.getElementById('btnAddCategory').addEventListener('click',()=>{
    const name = prompt("Masukkan nama kategori:");
    if(!name) return showToast('Aksi dibatalkan','error');
    const cats = getData('categories');
    cats.push({id:Date.now(),name});
    setData('categories',cats);
    localStorage.setItem('lastAction','Menambah kategori: '+name);
    refreshStats();
    showToast('Kategori "'+name+'" ditambahkan','success');
  });

  // === EVENT 3: Tambah Transaksi (dengan PopUp confirm) ===
  document.getElementById('btnAddTransaction').addEventListener('click',()=>{
    const ok = confirm("Apakah ingin menambah transaksi baru?");
    if(!ok) return showToast('Aksi dibatalkan','error');
    const trxs = getData('transactions');
    const trx = {id:Date.now(),nominal:Math.floor(Math.random()*100000)+10000};
    trxs.push(trx);
    setData('transactions',trxs);
    localStorage.setItem('lastAction','Menambah transaksi ID: '+trx.id);
    refreshStats();
    showToast('Transaksi baru berhasil','success');
  });

  // === EVENT 4: Fetch Quote (Asynchronous + Promise + Fetch) ===
  document.getElementById('btnShowQuote').addEventListener('click', async ()=>{
    showToast('Mengambil quote...', 'default', 1000);
    try{
      const res = await fetch('https://api.quotable.io/random');
      const data = await res.json();
      alert("Quote hari ini:\n\n" + data.content + "\n— " + data.author);
    }catch(err){
      showToast('Gagal mengambil quote','error');
    }
  });

  // === EVENT 5: Storage Listener ===
  window.addEventListener('storage',()=>{
    refreshStats();
    document.getElementById('lastAction').textContent = localStorage.getItem('lastAction')||'-';
  });
  </script>
</body>
</html>
