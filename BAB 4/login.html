<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login Petani</title>
  <style>
    :root{--green:#2f855a;--dark:#123}
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Inter,system-ui,Arial,sans-serif;
      margin:0;
      background:linear-gradient(rgba(255,255,255,0.3),rgba(255,255,255,0.3)),
                 url('./assets/Harvest.jpg') center/cover no-repeat fixed;
      background-color:#f0f4f8;
      color:var(--dark);
      min-height:100vh;
    }
    header{background:var(--green);color:#fff;padding:14px 20px;text-align:center}
    .container{max-width:460px;margin:40px auto;padding:16px}
    .card{background:#fff;padding:28px;border-radius:14px;box-shadow:0 8px 28px rgba(0,0,0,.12)}
    input{width:100%;padding:12px;border:1px solid #ccc;border-radius:8px;margin:8px 0;font-size:1rem}
    .btn{background:var(--green);color:#fff;padding:14px;border:none;border-radius:8px;cursor:pointer;width:100%;margin-top:16px;font-size:1.1rem}
    .btn:hover{background:#276749}
    #snackbar{visibility:hidden;min-width:260px;margin-left:-130px;background:#333;color:#fff;text-align:center;border-radius:8px;padding:14px;position:fixed;left:50%;bottom:30px;z-index:1000;opacity:0}
    #snackbar.show{visibility:visible;opacity:1;transform:translateY(0);transition:opacity .35s}
    #snackbar.success{background:#16a34a}#snackbar.error{background:#dc2626}
  </style>
</head>
<body>
  <header><div style="font-weight:700">Login Petani</div></header>
  <div class="container">
    <div class="card">
      <h2 style="text-align:center;margin-bottom:16px">Masuk ke Akun</h2>
      <form id="formLogin">
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="pass" placeholder="Kata Sandi" required />
        <button type="submit" class="btn">Masuk</button>
      </form>
      <p style="text-align:center;margin-top:16px">
        Belum punya akun? <a href="register.html" style="color:var(--green)">Daftar di sini</a>
      </p>
    </div>
  </div>
  <div id="snackbar"></div>

  <script>
    function showToast(m, t, d=3000){
      const s=document.getElementById('snackbar');s.textContent=m;s.className='show';
      if(t==='success')s.classList.add('success');if(t==='error')s.classList.add('error');
      setTimeout(()=>{s.className='';},d);
    }
    document.getElementById('formLogin').onsubmit=e=>{
      e.preventDefault();
      const em=document.getElementById('email').value.trim();
      const p=document.getElementById('pass').value;
      const daftar=JSON.parse(localStorage.getItem('daftarPetani')||'[]');
      const user=daftar.find(x=>x.email===em && x.password===p);
      if(!user){showToast('Email atau sandi salah!','error');return;}
      localStorage.setItem('user',JSON.stringify({isLoggedIn:true,nama:user.nama,email:em}));
      showToast(`Selamat datang, ${user.nama}!`,'success');
      setTimeout(()=>location.href='dashboard.html',1500);
    };
  </script>
</body>
</html>