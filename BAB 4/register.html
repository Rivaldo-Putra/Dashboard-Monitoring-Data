<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard Pertanian</title>
  <style>
    :root{--green:#2f855a;--dark:#123}
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Inter,system-ui,Arial,sans-serif;
      margin:0;
      background:linear-gradient(rgba(255,255,255,0.3),rgba(255,255,255,0.3)),
                 url('./assets/Harvest.jpg') center/cover no-repeat fixed;
      background-color:#f0f4f8;
      color:var(--dark);
      min-height:100vh;
    }
    header{background:var(--green);color:#fff;padding:14px 20px;display:flex;justify-content:space-between;align-items:center}
    .container{max-width:1000px;margin:40px auto;padding:16px;text-align:center}
    .btn{background:var(--green);color:#fff;padding:12px 20px;border:none;border-radius:8px;margin:10px;cursor:pointer;font-size:1rem}
    .btn:hover{background:#276749}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-top:30px}
    .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.1)}
    #snackbar{visibility:hidden;min-width:260px;margin-left:-130px;background:#333;color:#fff;text-align:center;border-radius:8px;padding:14px;position:fixed;left:50%;bottom:30px;z-index:1000;opacity:0}
    #snackbar.show{visibility:visible;opacity:1;transform:translateY(0);transition:opacity .35s}
    #snackbar.success{background:#16a34a}#snackbar.error{background:#dc2626}
  </style>
</head>
<body>
  <header>
    <div style="font-weight:700">Dashboard Pertanian</div>
    <nav>
      <a href="index.html" style="color:#fff;margin-left:12px">Beranda</a>
    </nav>
  </header>

  <div class="container">
    <h1>Selamat Datang, Petani!</h1>
    <p style="margin:16px 0">Sistem monitoring tanaman & panen</p>

    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <a href="login.html" class="btn">Login Petani</a>
      <a href="register.html" class="btn">Daftar Petani</a>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Statistik Saat Ini</h3>
        <p>Jumlah Tanaman: <strong id="countTanaman">0</strong></p>
        <p>Jumlah Panen: <strong id="countPanen">0</strong></p>
        <button class="btn" id="btnBukaDashboard" style="margin-top:12px">Buka Dashboard</button>
      </div>
      <div class="card">
        <h3>Aksi Cepat</h3>
        <button class="btn" id="btnTambahTanaman">Tambah Tanaman Demo</button>
        <button class="btn" id="btnTambahPanen">Tambah Panen Demo</button>
      </div>
    </div>
  </div>

  <div id="snackbar"></div>

  <script>
    function showToast(msg, type = 'default', dur = 3000) {
      const s = document.getElementById('snackbar');
      s.textContent = msg;
      s.className = 'show';
      if (type === 'success') s.classList.add('success');
      if (type === 'error') s.classList.add('error');
      setTimeout(() => { s.className = ''; }, dur);
    }

    const getT = () => JSON.parse(localStorage.getItem('tanaman') || '[]');
    const getP = () => JSON.parse(localStorage.getItem('panen') || '[]');

    function updateStats() {
      document.getElementById('countTanaman').textContent = getT().length;
      document.getElementById('countPanen').textContent = getP().length;
    }

    document.getElementById('btnBukaDashboard').addEventListener('click', () => {
      showToast('Membuka dashboard...', 'success');
      setTimeout(() => location.href = 'dashboard.html', 1000);
    });

    document.getElementById('btnTambahTanaman').addEventListener('click', () => {
      const tanaman = getT();
      tanaman.push({ id: Date.now(), nama: `Padi ${tanaman.length + 1}`, ditanam: new Date().toLocaleString() });
      localStorage.setItem('tanaman', JSON.stringify(tanaman));
      updateStats();
      showToast('Tanaman ditambahkan!', 'success');
    });

    document.getElementById('btnTambahPanen').addEventListener('click', () => {
      const panen = getP();
      panen.push({ id: Date.now(), nama: `Panen ${panen.length + 1}`, ton: (Math.random() * 4 + 1).toFixed(2), metode: 'Manual', tanggal: new Date().toLocaleString() });
      localStorage.setItem('panen', JSON.stringify(panen));
      updateStats();
      showToast('Panen dicatat!', 'success');
    });

    updateStats();
  </script>
</body>
</html>