<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Panel - Dashboard Wisata</title>
  <style>
    body {font-family: Arial; background: #f4f6f9; margin: 0;}
    header {background: #2b6cb0; color: #fff; padding: 14px 20px; display: flex; justify-content: space-between; align-items: center;}
    .brand {font-weight: bold;}
    nav a {color: #fff; text-decoration: none; margin-left: 15px;}
    .container {padding: 20px;}
    table {width: 100%; border-collapse: collapse; margin-top: 15px;}
    th, td {border: 1px solid #ccc; padding: 8px;}
    th {background: #e2e8f0;}
    form {background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); max-width: 300px; margin: 80px auto;}
    input, button {padding: 8px; width: 100%; margin-bottom: 10px;}
    .hidden {display: none;}
  </style>
</head>
<body>
  <header>
    <div class="brand">Admin Panel Wisata</div>
    <nav>
      <a href="index.html">Logout</a>
    </nav>
  </header>

  <!-- Halaman Login Admin -->
  <main id="loginPage" class="container">
    <form id="adminLoginForm">
      <h3>Login Admin</h3>
      <input type="text" id="adminUser" placeholder="Username" required>
      <input type="password" id="adminPass" placeholder="Password" required>
      <button type="submit">Masuk</button>
    </form>
  </main>

  <!-- Dashboard Admin -->
  <main id="adminDashboard" class="container hidden">
    <h2>Selamat Datang, Admin!</h2>
    <p>Berikut data dari pengguna:</p>

    <h3>Data Kategori</h3>
    <table id="adminCategories">
      <thead>
        <tr>
          <th>Nama Kategori</th>
          <th>Tanggal Dibuat</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>Data Transaksi</h3>
    <table id="adminTransactions">
      <thead>
        <tr>
          <th>Nama Transaksi</th>
          <th>Status Pembayaran</th>
          <th>Tanggal Dibuat</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <script>
    const adminUser = "admin";
    const adminPass = "12345";

    const loginPage = document.getElementById('loginPage');
    const dashboard = document.getElementById('adminDashboard');

    const loadData = () => {
      const categories = JSON.parse(localStorage.getItem('admin_categories') || '[]');
      const transactions = JSON.parse(localStorage.getItem('admin_transactions') || '[]');
      renderAdminData(categories, transactions);
    };

    const renderAdminData = (categories, transactions) => {
      const catBody = document.querySelector('#adminCategories tbody');
      const transBody = document.querySelector('#adminTransactions tbody');

      catBody.innerHTML = categories.map((c, i) =>
        `<tr>
          <td>${c.name}</td>
          <td>${c.createdAt}</td>
          <td><button onclick="deleteCategory(${i})">Hapus</button></td>
        </tr>`
      ).join('');

      transBody.innerHTML = transactions.map((t, i) =>
        `<tr>
          <td>${t.name}</td>
          <td>${t.status}</td>
          <td>${t.createdAt}</td>
          <td><button onclick="deleteTransaction(${i})">Hapus</button></td>
        </tr>`
      ).join('');
    };

    function deleteCategory(index) {
      const data = JSON.parse(localStorage.getItem('admin_categories') || '[]');
      data.splice(index, 1);
      localStorage.setItem('admin_categories', JSON.stringify(data));
      localStorage.setItem('categories', JSON.stringify(data));
      loadData();
    }

    function deleteTransaction(index) {
      const data = JSON.parse(localStorage.getItem('admin_transactions') || '[]');
      data.splice(index, 1);
      localStorage.setItem('admin_transactions', JSON.stringify(data));
      localStorage.setItem('transactions', JSON.stringify(data));
      loadData();
    }

    document.getElementById('adminLoginForm').addEventListener('submit', e => {
      e.preventDefault();
      const u = document.getElementById('adminUser').value;
      const p = document.getElementById('adminPass').value;

      if (u === adminUser && p === adminPass) {
        loginPage.classList.add('hidden');
        dashboard.classList.remove('hidden');
        loadData();
      } else {
        alert("Username atau Password salah!");
      }
    });
  </script>
</body>
</html>
